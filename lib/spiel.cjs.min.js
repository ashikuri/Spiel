"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var i=function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function a(t){return this instanceof a?(this.v=t,this):new a(t)}var s=Object.freeze({__proto__:null,__extends:function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},get __assign(){return i},__rest:function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},__decorate:function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},__param:function(t,e){return function(n,i){e(n,i,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},__generator:function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__exportStar:function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},__values:r,__read:o,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i},__await:a,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||c(t,e)}))})}function c(t,e){try{(n=r[t](e)).value instanceof a?Promise.resolve(n.value.v).then(u,d):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function u(t){c("next",t)}function d(t){c("throw",t)}function h(t,e){t(e),o.shift(),o.length&&c(o[0][0],o[0][1])}},__asyncDelegator:function(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:a(t[i](e)),done:"return"===i}:r?r(e):e}:r}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=r(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}});t(e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.emit=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t in this.events&&((e=this.events)[t].apply(e,s.__spread(n)),!0)},t.on=function(t,e){this.events[t]=e},t.events={},t}();e.default=n}))),t(e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.ianim=0}return t.prototype.anim=function(){var t=this;return function(e,n){var i=this;void 0===n&&(n=function(t){}),void 0===t.startAnim&&(t.startAnim=Math.trunc(Date.now()+this.animationSpeed));var r=Object.assign({},{x:0,y:0},e),o=Array.isArray(r.x)?r.x.length:Array.isArray(r.y)?r.y.length:[0].length;Array.isArray(r.x)||(this.sprit.x=r.x),Array.isArray(r.y)||(this.sprit.y=r.y);var a=setInterval((function(){t.startAnim<=Math.trunc(Date.now())&&(t.startAnim=void 0,n(t.ianim),t.ianim<o?(Array.isArray(r.x)&&(i.sprit.x=r.x[t.ianim]),Array.isArray(r.y)&&(i.sprit.y=r.y[t.ianim]),void 0===t.startAnim&&(t.startAnim=Math.trunc(Date.now()+i.animationSpeed),t.ianim+=1)):clearInterval(a+(t.ianim=0)))}),1)}},t.prototype.collide=function(t,e,n,i){void 0===i&&(i=null);var r=!1,o="none";if(null!==i){var a=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+i*n.scale&&t.y+t.entityHeight>n.y,s=t.x<n.x+i*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,c=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y+e.entityHeight*n.scale-i*n.scale,u=t.x<n.x+e.entityWidth*n.scale-i*n.scale&&t.x+t.entityWidth>n.x+e.entityWidth*n.scale&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,d=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y;r=a||s||c||u,a?o="top":s?o="left":c?o="bottom":u?o="right":d&&(o="inside")}else if(null!==e.body){a=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+1&&t.y+t.entityHeight>n.y+e.body.y,s=t.x<n.x+1&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y,c=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.height+1,u=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.width+1&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y;r=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y,a?o="top":s?o="left":c?o="bottom":u?o="right":r&&(o="inside")}else{a=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y&&t.y+t.entityHeight>n.y,s=t.x<n.x&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,c=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y+e.entityHeight*n.scale-n.scale,u=t.x<n.x+e.entityWidth*n.scale-n.scale&&t.x+t.entityWidth>n.x+e.entityWidth*n.scale&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y;r=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,a?o="top":s?o="left":c?o="bottom":u?o="right":r&&(o="inside")}return{side:o,collide:r}},t}();e.default=n}))),t(e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=!1,n=t.toString().replace(/(function)? *[A-z0-9_$]+ *\(([^\r]+)?\) *({)|\(([^\r]+)?\) *=> *([^\{]|{)/g,(function(t,e,n,i,r,o){return"("+(n||r||"")+") =>"+(i||o)})).replace(/{ *return */g,(function(){return e=!0,""}));return e&&(n=n.split("").reverse().join("").replace(/}/,"").split("").reverse().join("")),n}})));
/*!
 * Contro
 * (c) 2020 Niklas Higi
 * Released under the MIT License.
 */
const c={preferGamepad:!1};class u{constructor(t=0,e=0){this.x=t,this.y=e}}const d=["left","middle","right"];const h={" ":["Space","Spacebar","Space Bar"],AltGraph:["Alt Gr"],ArrowDown:["Down"],ArrowLeft:["Left"],ArrowRight:["Right"],ArrowUp:["Up"],Backspace:["Backspace"],Control:["Ctrl","Ctl"],Delete:["Delete","Del"],Enter:["Enter","Return"],Escape:["Escape","Esc"],Insert:["Insert","Ins"],PageDown:["Page Down","PgDown"],PageUp:["Page Up","PgUp"],Tab:["Tab"]};function l(t){if(1===t.length)return t.toLowerCase();for(const e in h)for(const n of h[e])if(t.toLowerCase()===n.toLowerCase())return e;return t}function y(t){return t in h?h[t][0]:1===t.length?t.toUpperCase():t}const f={arrows:["Arrow keys",["ArrowUp","ArrowLeft","ArrowDown","ArrowRight"]],wasd:["WASD",["W","A","S","D"]]};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function p(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))}const m=[["A"],["B"],["X"],["Y"],["Left Bumper","LB"],["Right Bumper","RB"],["Left Trigger","LT"],["Right Trigger","RT"],["Back","View"],["Start"],["Left Stick"],["Right Stick"],["Up","DpadUp"],["Down","DpadDown"],["Left","DpadLeft"],["Right","DpadRight"],["Home","Guide","Xbox"]];const x={left:{label:"Left stick",xAxis:0,yAxis:1},right:{label:"Right stick",xAxis:2,yAxis:3}};var v=Object.freeze({__proto__:null,Gamepad:class{constructor({win:t=window,nav:e=navigator}={}){this.pressedButtons=new Set,this.gamepadTimestamp=0,this.window=t,this.navigator=e,this.window.addEventListener("gamepadconnected",({gamepad:t})=>{this.isConnected()||"standard"===t.mapping&&(this.gamepadIndex=t.index,c.preferGamepad=!0)}),this.window.addEventListener("gamepaddisconnected",({gamepad:t})=>{this.gamepadIndex===t.index&&(this.gamepadIndex=void 0,c.preferGamepad=!1)})}isConnected(){return void 0!==this.gamepadIndex&&this.gamepad.connected}get gamepad(){const t=this.navigator.getGamepads()[this.gamepadIndex];return t.timestamp>this.gamepadTimestamp&&(c.preferGamepad=!0,this.gamepadTimestamp=t.timestamp),t}button(t){const e=function(t){if("number"==typeof t)return t;let e=0;for(const n of m){for(const i of n)if(t.toLowerCase()===i.toLowerCase())return e;e++}throw new Error(`There is no gamepad button called "${t}"!`)}(t),n=function(t){return m[t][0]}(e);return{label:n,query:()=>!!this.isConnected()&&this.gamepad.buttons[e].pressed,fromGamepad:!0,trigger:{label:n,query:()=>!!this.isConnected()&&(this.gamepad.buttons[e].pressed?!this.pressedButtons.has(e)&&(this.pressedButtons.add(e),!0):(this.pressedButtons.delete(e),!1)),fromGamepad:!0}}}stick(t){let e;if("string"==typeof t){if(!(t in x))throw new Error(`Gamepad stick "${t}" not found!`);e=x[t]}else e=t;return{label:e.label,query:()=>this.isConnected()?new u(this.gamepad.axes[e.xAxis],this.gamepad.axes[e.yAxis]):new u(0,0)}}vibrate(t,{weakMagnitude:e,strongMagnitude:n}={}){return p(this,void 0,void 0,(function*(){if(!this.isConnected())return;const i=this.gamepad.vibrationActuator;i&&"dual-rumble"===i.type&&(yield i.playEffect("dual-rumble",{duration:t,strongMagnitude:n,weakMagnitude:e}))}))}},Keyboard:class{constructor({doc:t=document}={}){this.pressedKeys=new Set,this.queuedKeys=new Set,this.document=t,this.document.addEventListener("keydown",t=>{c.preferGamepad=!1;let e=t.key;return e===e.toUpperCase()&&(e=e.toLowerCase()),this.pressedKeys.add(e),this.queuedKeys.add(e),!1}),this.document.addEventListener("keyup",t=>{c.preferGamepad=!1;let e=t.key;return e===e.toUpperCase()&&(e=e.toLowerCase()),this.pressedKeys.delete(e),this.queuedKeys.delete(e),!1})}key(t){const e=l(t),n=y(e);return{label:y(e),query:()=>this.pressedKeys.has(e),trigger:{label:n,query:()=>this.queuedKeys.delete(e)}}}directionalKeys(t,e){let n,i;if("string"==typeof t){const e=t.toLowerCase();if(!(e in f))throw new Error(`Directional key template "${t}" not found!`);{const t=f[e];n=t[0],i=t[1]}}else{if(4!==t.length)throw new Error("Directional key templates have to consist of four keys!");i=t.map(t=>l(t)),n=t.map(t=>y(t)).join("")}return{label:e||n,query:()=>{const t=new u;return this.key(i[0]).query()&&(t.y-=1),this.key(i[1]).query()&&(t.x-=1),this.key(i[2]).query()&&(t.y+=1),this.key(i[3]).query()&&(t.x+=1),t}}}},Mouse:class{constructor({canvas:t,doc:e}){this.pointerMovement=new u,this.pressedButtons=new Set,this.queuedButtons=new Set,this.scrollDistance=0,this.canvas=t,this.document=null!=e?e:document;const n=this.canvas.addEventListener.bind(this.canvas);n("mousedown",t=>{c.preferGamepad=!1,this.pressedButtons.add(t.button),this.queuedButtons.add(t.button)}),n("mouseup",t=>{c.preferGamepad=!1,this.pressedButtons.delete(t.button),this.queuedButtons.delete(t.button)}),n("mousemove",t=>{c.preferGamepad=!1,this.pointerMovement.x+=t.movementX,this.pointerMovement.y+=t.movementY}),n("wheel",t=>{c.preferGamepad=!1;const e=t.deltaY;this.scrollDistance+=e})}parseButton(t){if("string"==typeof t){if(d.includes(t))return d.indexOf(t);throw new Error(`There is no mouse button called "${t}"!`)}if(t<d.length)return t;throw new Error(`There is no mouse button with the index ${t}!`)}button(t){const e=this.parseButton(t),n=["Left","Middle","Right"][e]+" Mouse Button";return{label:n,query:()=>this.pressedButtons.has(e),trigger:{label:n,query:()=>!!this.queuedButtons.has(e)&&(this.queuedButtons.delete(e),!0)}}}pointer(){return{label:"Cursor",query:()=>{const t=this.pointerMovement;return this.pointerMovement=new u(0,0),t}}}wheel(){return{label:"Mouse wheel",query:()=>{const t=this.scrollDistance;return this.scrollDistance=0,t}}}lockPointer(){this.canvas.requestPointerLock()}unlockPointer(){this.document.exitPointerLock()}isPointerLocked(){return this.document.pointerLockElement===this.canvas}},and:function(...t){if(t.length<2)throw new Error("Less than two controls specified!");return{label:t.map(t=>t.label).join(" + "),query:()=>{for(const e of t)if(!e.query())return!1;return!0}}},or:function(...t){if(t.length<2)throw new Error("Less than two controls specified!");return{get label(){return t.some(t=>t.fromGamepad)?(c.preferGamepad?t.find(t=>t.fromGamepad):t.find(t=>!t.fromGamepad)).label:t[0].label},query:()=>{let e;for(const n of t){const t=n.query();if(e=t,t)return t}if("boolean"==typeof e)return!1}}}}),g=e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.emit=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return t in this.events&&((e=this.events)[t].apply(e,s.__spread(n)),!0)},t.on=function(t,e){this.events[t]=e},t.events={},t}();e.default=n}));t(g);var b=e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.ianim=0}return t.prototype.anim=function(){var t=this;return function(e,n){var i=this;void 0===n&&(n=function(t){}),void 0===t.startAnim&&(t.startAnim=Math.trunc(Date.now()+this.animationSpeed));var r=Object.assign({},{x:0,y:0},e),o=Array.isArray(r.x)?r.x.length:Array.isArray(r.y)?r.y.length:[0].length;Array.isArray(r.x)||(this.sprit.x=r.x),Array.isArray(r.y)||(this.sprit.y=r.y);var a=setInterval((function(){t.startAnim<=Math.trunc(Date.now())&&(t.startAnim=void 0,n(t.ianim),t.ianim<o?(Array.isArray(r.x)&&(i.sprit.x=r.x[t.ianim]),Array.isArray(r.y)&&(i.sprit.y=r.y[t.ianim]),void 0===t.startAnim&&(t.startAnim=Math.trunc(Date.now()+i.animationSpeed),t.ianim+=1)):clearInterval(a+(t.ianim=0)))}),1)}},t.prototype.collide=function(t,e,n,i){void 0===i&&(i=null);var r=!1,o="none";if(null!==i){var a=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+i*n.scale&&t.y+t.entityHeight>n.y,s=t.x<n.x+i*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,c=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y+e.entityHeight*n.scale-i*n.scale,u=t.x<n.x+e.entityWidth*n.scale-i*n.scale&&t.x+t.entityWidth>n.x+e.entityWidth*n.scale&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,d=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y;r=a||s||c||u,a?o="top":s?o="left":c?o="bottom":u?o="right":d&&(o="inside")}else if(null!==e.body){a=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+1&&t.y+t.entityHeight>n.y+e.body.y,s=t.x<n.x+1&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y,c=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.height+1,u=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.width+1&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y;r=t.x<n.x+e.body.x+e.body.width&&t.x+t.entityWidth>n.x+e.body.x&&t.y<n.y+e.body.y+e.body.height&&t.y+t.entityHeight>n.y+e.body.y,a?o="top":s?o="left":c?o="bottom":u?o="right":r&&(o="inside")}else{a=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y&&t.y+t.entityHeight>n.y,s=t.x<n.x&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,c=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y+e.entityHeight*n.scale-n.scale,u=t.x<n.x+e.entityWidth*n.scale-n.scale&&t.x+t.entityWidth>n.x+e.entityWidth*n.scale&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y;r=t.x<n.x+e.entityWidth*n.scale&&t.x+t.entityWidth>n.x&&t.y<n.y+e.entityHeight*n.scale&&t.y+t.entityHeight>n.y,a?o="top":s?o="left":c?o="bottom":u?o="right":r&&(o="inside")}return{side:o,collide:r}},t}();e.default=n}));t(b);var w=e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=!1,n=t.toString().replace(/(function)? *[A-z0-9_$]+ *\(([^\r]+)?\) *({)|\(([^\r]+)?\) *=> *([^\{]|{)/g,(function(t,e,n,i,r,o){return"("+(n||r||"")+") =>"+(i||o)})).replace(/{ *return */g,(function(){return e=!0,""}));return e&&(n=n.split("").reverse().join("").replace(/}/,"").split("").reverse().join("")),n}}));t(w);var _=e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=s.__importDefault(g),i=s.__importDefault(b),r=s.__importDefault(w),o=s.__importDefault(v),a=function(t){try{return/^\s*class/.test(t.toString())}catch(t){return!1}},c={startOut:{},iout:{},cancelOut:{}};function u(t,e,n){if(void 0===n&&(n=1),r.default(t)in c.cancelOut==!1){r.default(t)in c.startOut==!1&&(c.startOut[r.default(t)]=null,c.iout[r.default(t)]=0),null===c.startOut[r.default(t)]&&(c.startOut[r.default(t)]=Math.trunc(Date.now()+e));var i=setInterval((function(){c.startOut[r.default(t)]<=Math.trunc(Date.now())&&(c.startOut[r.default(t)]=null,t(c.iout[r.default(t)]),++c.iout[r.default(t)]<n?null===c.startOut[r.default(t)]&&(c.startOut[r.default(t)]=Math.trunc(Date.now()+e)):clearInterval(i+(c.iout[r.default(t)]=0)))}),1)}}function d(t){c.cancelOut[r.default(t)]=!0}var h,l={},y={};function f(t,e){r.default(t)in y==!1&&(r.default(t)in l==!1&&(l[r.default(t)]=0),++l[r.default(t)]>=e&&(t(),l[r.default(t)]=0))}function p(t){y[r.default(t)]=!0}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new t(e)}e.ex=m,function(t){t.Image=function(t){return new Promise((function(e,i){var r=document.createElement("img");r.title="Image",r.src=t,r.onload=function(){n.default.emit("loaded"),e(r)},r.onerror=i}))},t.Audio=function(t){return new Promise((function(e,i){var r=document.createElement("audio");r.title="Audio",r.src=t,r.onloadeddata=function(){n.default.emit("loaded"),e(r)},r.onerror=i}))},t.Text=function(t,e){return new Promise((function(i,r){var o="fontSize"in(e||{})?e.fontSize:10,a="fontFamily"in(e||{})?e.fontFamily:"sans-serif",s="color"in(e||{})?e.color:"#000",c="alpha"in(e||{})?e.alpha:1,u="padding"in(e||{})?e.padding:5;setTimeout((function(){n.default.emit("loaded"),i({fontSize:o,fontFamily:a,color:s,text:t,alpha:c,padding:u,title:"Text"})}))}))}}(e.Loader||(e.Loader={})),function(t){var e=function(){function t(){this.alpha=1,this.index=1,this.body=null,this.scale=1,this.hidden=!1,this.fixed=!1,this.x=0,this.y=0,this.clones=[],this.rotation=0}return t.prototype.init=function(){},t.prototype.afterRedraw=function(){},t.prototype.redraw=function(){},t.prototype.beforeRedraw=function(){},t.prototype.on=function(t,e){},t.prototype.off=function(t){},t.prototype.tick=function(t,e){return void 0===e&&(e=1),f(t,e)},t.prototype.cancelTick=function(t){return p(t)},t.prototype.timeout=function(t,e,n){return u(t,e,n)},t.prototype.cancelTimeout=function(t){return d(t)},t.prototype.changeScene=function(t){},t.prototype.audio=function(t){return document.createElement("audio")},t.prototype.collide=function(t,e){return{side:"none",collide:!1}},t.prototype.getEntity=function(t){return Object.assign({},this)},t}();t.Image=e;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.replaced=[],e}return s.__extends(e,t),e.prototype.setFontSize=function(t){},e.prototype.setFontFamily=function(t){},e.prototype.setColor=function(t){},e.prototype.setPadding=function(t){},e.prototype.getFontSize=function(){return 0},e.prototype.getFontFamily=function(){return""},e.prototype.getColor=function(){return""},e.prototype.getPadding=function(){return 0},e}(e);t.Text=n;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprit={x:0,y:0},e.animationSpeed=300,e}return s.__extends(e,t),e.prototype.animation=function(t,e){},e}(e);t.Sprit=i;var r=function(){function t(){this.x=0,this.y=0}return t.prototype.init=function(){},t.prototype.update=function(){},t.prototype.tick=function(t,e){return void 0===e&&(e=1),f(t,e)},t.prototype.cancelTick=function(t){return p(t)},t.prototype.timeout=function(t,e,n){return u(t,e,n)},t.prototype.cancelTimeout=function(t){return d(t)},t.prototype.audio=function(t){return document.createElement("audio")},t.prototype.getEntity=function(t){return Object.assign({},this)},t.prototype.getTarget=function(){return Object.assign({},this)},t.prototype.setTarget=function(t){},t}();t.Camera=r}(h=e.Entity||(e.Entity={}));var x=function(){function t(){}return t.prototype.onCamera=function(t){},t.prototype.onEntity=function(t){},t.prototype.onFirstSetCamera=function(t){},t.prototype.changeScene=function(t,e){},t.prototype.sceneUpdate=function(t,e,n){},t.prototype.entityUpdate=function(t){},t.prototype.onCanvas=function(t,e,n){},t.prototype.cameraUpdate=function(t){},t.prototype.onFirstSetEntity=function(t){},t}();e.Plugin=x;var _=function(t){function e(){var e=t.call(this)||this;return e.secondsPassed=0,e.oldTimeStamp=0,e.fps=0,e.i=0,setInterval((function(){e.fps=e.i,e.i=0}),1e3),e}return s.__extends(e,t),e.prototype.sceneUpdate=function(t,e,n){this.secondsPassed=(n-this.oldTimeStamp)/1e3,this.oldTimeStamp=n,this.fps=Math.round(1/this.secondsPassed)},e.prototype.onEntity=function(t){this.fps!==t.fps&&(t.fps=this.fps)},e}(x);e.FPSPlugin=_;var O=function(){function t(t,e,i){var r=this;void 0===e&&(e=800),void 0===i&&(i=600),this.w=e,this.h=i,this.state={},this.audio={},this.saveObject={},this.load={},this.camera={},this.cameraBackground={},this.target={},this.onTarget={},this.plugins=t.plugins||[],this.state=t.state||{},this.canvas=t.canvas||document.body.appendChild(document.createElement("canvas")),this.canvas.height=this.h,this.canvas.width=this.w,this.context=this.canvas.getContext("2d"),t.pixel&&(this.canvas.style.imageRendering="pixelated"),this.scenes=t.scene.map((function(t){for(var e in t.entity)a(t.entity[e])&&(t.entity[e]=m(t.entity[e]));return t})),this.sceneId=0,this.use=this.scenes[this.sceneId].name,this.control={gamepad:new o.default.Gamepad,keyboard:new o.default.Keyboard,mouse:new o.default.Mouse({canvas:this.canvas}),detectAnd:o.default.and,detectOr:o.default.or};var s=function(e){t.load[e].then((function(t){t instanceof HTMLAudioElement?r.audio[e]=t:r.load[e]=t}))};for(var c in t.load)s(c);var u=0;n.default.on("loaded",(function(){r.context.clearRect(0,0,r.w,r.h);var e=Math.round(++u/Object.keys(t.load).length*100);e>100?r.start(t):"loadScene"in t&&t.loadScene(r.context,e),100===e&&n.default.emit("loaded")}))}return t.prototype.createSaveJson=function(){var t={currentSceneId:this.sceneId,currentSceneName:this.use,allScene:Object.assign({},this.saveObject)};for(var e in t.allScene)for(var n in t.allScene[e])delete t.allScene[e][n].canvas;return JSON.stringify(t)},t.prototype.setEntity=function(t,e,n,r){var o,a,c=this,u=new i.default,d=e.entity[n];void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),d.scene=e,d.game=this,d.canvas=this.canvas,d.getEntity=function(t){if(e.entity[t]instanceof h.Camera)throw new TypeError("You can't get the camera");return Object.assign({},e.entity[t])},d.audio=function(e){if(!(e in t.load))throw new ReferenceError(e+" is not loaded or defined with this name");if(e in c.audio)return c.audio[e];throw new TypeError(e+" is not Audio Element")},d instanceof h.Camera||"@camera"===n?d instanceof h.Camera&&"@camera"===n&&(d.getTarget=function(){return c.target[c.sceneId]},d.setTarget=function(t){if(e.entity[t]instanceof h.Camera)throw new TypeError("You can't target the camera");c.target[c.sceneId]=e.entity[t]}):(d.control=this.control,d.on=function(t,e){var i;c.onTarget[c.sceneId][n]=((i={})[t]=e,i)},d.off=function(t){n in c.onTarget[c.sceneId]&&delete c.onTarget[c.sceneId][n][t]},d.changeScene=function(t){var e,n;if(c.sceneId=c.scenes.findIndex((function(e){return e.name===t})),-1!==c.sceneId&&"toScene"in c.scenes[c.sceneId]==!1||c.scenes[c.sceneId].toScene(c.use)){c.sceneId in c.saveObject||(c.saveObject[c.sceneId]=c.scenes[c.sceneId].entity),c.use=c.scenes[c.sceneId].name;try{for(var i=s.__values(c.plugins),r=i.next();!r.done;r=i.next()){r.value.changeScene(c.saveObject[c.sceneId],c.use)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},r instanceof HTMLImageElement?(void 0===d.entityWidth&&(d.entityWidth=r.width),void 0===d.entityHeight&&(d.entityHeight=r.height),d.collide=function(t,n){var i=this;void 0===n&&(n=null);var r=e.entity[t],o=!1,a="none",s=u.collide(this,r,r,n);return"none"!==s.side&&(a=s.side),!1!==s.collide&&(o=s.collide),r.clones.forEach((function(t){var e=u.collide(i,r,t,n);"none"!==e.side&&(a=e.side),!1!==e.collide&&(o=e.collide)})),{side:a,collide:o}},d instanceof h.Sprit&&(d.animation=u.anim())):(d.setFontSize=function(t){r.fontSize=t},d.setFontFamily=function(t){r.fontFamily=t},d.setColor=function(t){r.color=t},d.setPadding=function(t){r.padding=t},d.getFontSize=function(){return r.fontSize},d.getFontFamily=function(){return r.fontFamily},d.getColor=function(){return r.color},d.getPadding=function(){return r.padding}));try{for(var l=s.__values(this.plugins),y=l.next();!y.done;y=l.next()){var f=y.value;d instanceof h.Camera&&"@camera"===n?f.onFirstSetCamera(d):f.onFirstSetEntity(d)}}catch(t){o={error:t}}finally{try{y&&!y.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}},t.prototype.start=function(t){var e,n,i=this;if(-1!==this.sceneId){this.scene(t,this.sceneId),void 0===this.onTarget[this.sceneId]&&(this.onTarget[this.sceneId]={});try{for(var r=s.__values(this.plugins),o=r.next();!o.done;o=r.next()){o.value.onCanvas(this.canvas,this.saveObject[this.sceneId],this.onTarget[this.sceneId])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}var a=function(t,e){for(var n in i.onTarget[i.sceneId])t in i.onTarget[i.sceneId][n]&&e.offsetX<i.saveObject[i.sceneId][n].x+i.saveObject[i.sceneId][n].entityWidth*i.saveObject[i.sceneId][n].scale&&e.offsetX>i.saveObject[i.sceneId][n].x&&e.offsetY<i.saveObject[i.sceneId][n].y+i.saveObject[i.sceneId][n].entityHeight*i.saveObject[i.sceneId][n].scale&&e.offsetY>i.saveObject[i.sceneId][n].y&&i.onTarget[i.sceneId][n][t]()};this.canvas.onmouseover=function(t){return a("hover",t)},this.canvas.onclick=function(t){return a("click",t)}}},t.prototype.scene=function(t,e){var i=this;e in this.saveObject||(this.saveObject[e]=this.scenes[e].entity),setTimeout((function(){return s.__awaiter(i,void 0,void 0,(function(){var i,r,o,a,c=this;return s.__generator(this,(function(u){switch(u.label){case 0:return"@camera"in this.saveObject[e]?(void 0===this.saveObject[e]["@camera"].canvas&&(this.setEntity(t,this.scenes[e],"@camera"),this.camera[e]=this.saveObject[e]["@camera"]),"init"in this.camera[e]&&(this.camera[e].init(),(t.save||"save"in t)&&(this.camera[e].init=function(){})),i=this.cameraBackground,r=e,[4,this.camera[e].background]):[3,2];case 1:i[r]=u.sent(),this.camera[e].width=this.cameraBackground[e].width,this.camera[e].height=this.cameraBackground[e].height,this.drawCamera(e),u.label=2;case 2:for(o in this.saveObject[e])"@camera"!==o&&(void 0===this.saveObject[e][o].canvas&&this.setEntity(t,this.scenes[e],o,this.load[this.saveObject[e][o].use]||this.load[o]),"init"in this.saveObject[e][o]&&(this.saveObject[e][o].init(),(t.save||"save"in t)&&(this.saveObject[e][o].init=function(){})),this.draw(o,e));return(a=function(i){return s.__awaiter(c,void 0,void 0,(function(){var r,o,c,u;return s.__generator(this,(function(d){switch(d.label){case 0:return this.use===this.scenes[e].name?requestAnimationFrame(a):-1!==e&&this.scene(t,this.sceneId),n.default.emit("key:tick-increment"),this.context.clearRect(0,0,this.w,this.h),[4,this.update(t,e)];case 1:d.sent();try{for(r=s.__values(this.plugins),o=r.next();!o.done;o=r.next())o.value.sceneUpdate(this.saveObject[e],this.use,i)}catch(t){c={error:t}}finally{try{o&&!o.done&&(u=r.return)&&u.call(r)}finally{if(c)throw c.error}}return[2]}}))}))})(0),[2]}}))}))}))},t.prototype.drawCamera=function(t){var e,n;try{for(var i=s.__values(this.plugins),r=i.next();!r.done;r=i.next()){r.value.cameraUpdate(this.camera[t])}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}this.context.drawImage(this.cameraBackground[t],this.camera[t].x,this.camera[t].y)},t.prototype.draw=function(t,e){var n,i,r=this,o=this.saveObject[e][t];try{for(var a=s.__values(this.plugins),c=a.next();!c.done;c=a.next()){c.value.entityUpdate(o)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}if(t in this.saveObject[e]){var u=this.load[o.use]||this.load[t];if(this.context.globalAlpha=o.alpha,u instanceof HTMLImageElement)"sprit"in o?(this.context.save(),this.context.translate(o.x+(void 0===this.camera[e]||o.fixed?0:this.camera[e].x),o.y+(void 0===this.camera[e]||o.fixed?0:this.camera[e].y)),this.context.rotate(o.rotation*(Math.PI/180)),this.context.drawImage(u,o.entityWidth*o.sprit.x,o.entityHeight*o.sprit.y,o.entityWidth,o.entityHeight,0,0,o.entityWidth*o.scale,o.entityHeight*o.scale),this.context.restore(),o.clones.forEach((function(t){var n=t.x,i=t.y,a=t.scale,s=t.sprit,c=t.rotation,d=void 0===c?0:c,h=t.fixed,l=void 0!==h&&h;r.context.save(),r.context.translate(n+(void 0===r.camera[e]||l?0:r.camera[e].x),i+(void 0===r.camera[e]||l?0:r.camera[e].y)),r.context.rotate(d*(Math.PI/180)),r.context.drawImage(u,o.entityWidth*(s||o.sprit).x,o.entityHeight*(s||o.sprit).y,o.entityWidth,o.entityHeight,0,0,o.entityWidth*a,o.entityHeight*a),r.context.restore()}))):(this.context.save(),this.context.translate(o.x+(void 0===this.camera[e]||o.fixed?0:this.camera[e].x),o.y+(void 0===this.camera[e]||o.fixed?0:this.camera[e].y)),this.context.rotate(o.rotation*(Math.PI/180)),this.context.drawImage(u,0,0,o.entityWidth*o.scale,o.entityHeight*o.scale),this.context.restore(),o.clones.forEach((function(t){var n=t.x,i=t.y,a=t.rotation,s=void 0===a?0:a,c=t.scale,d=t.fixed,h=void 0!==d&&d;r.context.save(),r.context.translate(n+(void 0===r.camera[e]||h?0:r.camera[e].x),i+(void 0===r.camera[e]||h?0:r.camera[e].y)),r.context.rotate(s*(Math.PI/180)),r.context.drawImage(u,0,0,o.entityWidth*(c||o.scale),o.entityHeight*(c||o.scale)),r.context.restore()})));else if(!(u instanceof HTMLAudioElement)){var d=u.text;"replaced"in o&&s.__spread([["",""]],o.replaced).forEach((function(t){d=d.replace.apply(d,s.__spread(t)).replace(/\*[a-z0-9_]+/i,(function(t){return t.slice(1)in o?o[t.slice(1)]:t}))})),o.entityWidth=0,o.entityHeight=0,this.context.save(),this.context.translate(o.x+(void 0===this.camera[e]||o.fixed?0:this.camera[e].x),o.y+(void 0===this.camera[e]||o.fixed?0:this.camera[e].y)+u.fontSize*o.scale/1.4),this.context.rotate(o.rotation*(Math.PI/180)),this.context.font=u.fontSize*o.scale+"px "+u.fontFamily,this.context.fillStyle=u.color,d.split("\n").forEach((function(t,e){o.entityWidth<r.context.measureText(t).width&&(o.entityWidth=r.context.measureText(t).width),o.entityHeight=u.fontSize*(e+1)+u.padding*e,r.context.fillText(t.trim(),0,(u.fontSize+u.padding)*e)})),this.context.restore(),o.clones.forEach((function(t){var n=t.x,i=t.y,a=t.rotation,s=void 0===a?0:a,c=t.scale,h=t.fixed,l=void 0!==h&&h;r.context.save(),r.context.translate(n+(void 0===r.camera[e]||l?0:r.camera[e].x),i+u.fontSize*c/1.4+(void 0===r.camera[e]||l?0:r.camera[e].y)),r.context.rotate(s*(Math.PI/180)),r.context.font=u.fontSize*c+"px "+u.fontFamily,r.context.fillStyle=u.color,d.split("\n").forEach((function(t,e){o.entityWidth<r.context.measureText(t).width&&(o.entityWidth=r.context.measureText(t).width),o.entityHeight=u.fontSize*(e+1)+u.padding*e,r.context.fillText(t.trim(),0,(u.fontSize+u.padding)*e)})),r.context.restore()}))}}},t.prototype.update=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n,i,r,o,a,c,u,d,h,l,y,f,p,m,x,v=this;return s.__generator(this,(function(g){if((this.scenes[e].backgroundColor||t.darkmode||!("darkmode"in t))&&(this.context.save(),this.context.fillStyle=this.scenes[e].backgroundColor?this.scenes[e].backgroundColor:"#000",this.context.rect(0,0,this.w,this.h),this.context.fill(),this.context.restore()),void 0!==this.camera[e]){this.target[e]&&(n=this.target[e],this.canvas.width/2<=n.x+n.entityWidth/2&&(i=null,i=this.camera[e].width-this.canvas.width/2<=n.x+n.entityWidth/2&&this.camera[e].x<=this.canvas.width-this.camera[e].width?this.canvas.width-this.camera[e].width:this.canvas.width/2-(n.x+n.entityWidth/2),this.camera[e].x=Math.round(i)),this.canvas.height/2<=n.y+n.entityHeight/2&&(i=null,i=this.camera[e].height-this.canvas.height/2<=n.y+n.entityHeight/2&&this.camera[e].y<=this.canvas.height-this.camera[e].height?this.canvas.height-this.camera[e].height:this.canvas.height/2-(n.y+n.entityHeight/2),this.camera[e].y=Math.round(i))),this.drawCamera(e);try{for(r=s.__values(this.plugins),o=r.next();!o.done;o=r.next())o.value.onCamera(this.camera[e])}catch(t){l={error:t}}finally{try{o&&!o.done&&(y=r.return)&&y.call(r)}finally{if(l)throw l.error}}this.camera[e].update()}try{for(a=s.__values(Object.keys(this.saveObject[e]).filter((function(t){return"@camera"!==t})).sort((function(t,n){return v.saveObject[e][t].index-v.saveObject[e][n].index}))),c=a.next();!c.done;c=a.next()){u=c.value;try{for(m=void 0,d=s.__values(this.plugins),h=d.next();!h.done;h=d.next())h.value.onEntity(this.saveObject[e][u])}catch(t){m={error:t}}finally{try{h&&!h.done&&(x=d.return)&&x.call(d)}finally{if(m)throw m.error}}"beforeRedraw"in this.saveObject[e][u]&&this.saveObject[e][u].beforeRedraw(),"redraw"in this.saveObject[e][u]&&this.saveObject[e][u].redraw(),this.saveObject[e][u].hidden||this.draw(u,e),"afterRedraw"in this.saveObject[e][u]&&this.saveObject[e][u].afterRedraw()}}catch(t){f={error:t}}finally{try{c&&!c.done&&(p=a.return)&&p.call(a)}finally{if(f)throw f.error}}return[2]}))}))},t}();e.Game=O})),O=t(_),S=_.ex,j=_.Loader,I=_.Entity,H=_.Plugin,W=_.FPSPlugin,A=_.Game;exports.Entity=I,exports.FPSPlugin=W,exports.Game=A,exports.Loader=j,exports.Plugin=H,exports.default=O,exports.ex=S;
