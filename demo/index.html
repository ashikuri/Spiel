<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Demo of Spiel</title>
</head>
<body>
    <h1>Use "a" for change scene (scene1 => scene2)</h1>
    <h1>Use "z" for change scene (scene2 => scene1)</h1>
    <script src="./../lib/spiel.js"></script>
    <script>
        const game = new Spiel.Game({
            darkmode: true,
            pixel: true,
            save: true,
            load: {
                image1: Spiel.Loader.Image("./image3.png"),
                image2: Spiel.Loader.Image("./image2.png"),
                text2: Spiel.Loader.Text("salut", {color: "#fff", fontSize: 33, padding: 7 + 7 / 3}),
            },
            loadScene(ctx, p){

            },
            scene: [
                {
                    
                    name: "scene1",
                    state: {
                        test: "test"
                    },
                    entity: {
                        "@camera": class extends Spiel.Entity.Camera{
                            init(){
                                this.background = Spiel.Loader.Image("./bg.png")
                                this.setTarget("image2")
                            }
                        },
                        image2: class extends Spiel.Entity.Image{
                            init(){
                                this.index = 2
                                this.x = 350
                                this.y = 100
                            }
                            redraw(){
                                console.log(this.game.fps)
                                if(this.key.findIndex((v) =>v === "e") !== -1) console.log(this.scene.state.test)
                                if(this.key.findIndex((key) =>key === "ArrowUp") !== -1) this.y += -1
                                if(this.key.findIndex((key) =>key === "ArrowDown") !== -1) this.y += 1
                                if(this.key.findIndex((key) =>key === "ArrowLeft") !== -1) this.x += -1
                                if(this.key.findIndex((key) =>key === "ArrowRight") !== -1) this.x += 1
                            }
                        },
                        image1: Spiel.ex(class extends Spiel.Entity.Image{
                            init(){
                                this.body = {
                                    x: 2,
                                    y: 2,
                                    width: 46,
                                    height: 34
                                }
                                this.x = 100
                                this.y = 100
                            }
                            redraw(){
                                if(this.key.findIndex((v) =>v === "z") !== -1) console.log(this.scene.state.test)
                                if(this.key.findIndex((v) =>v === "a") !== -1){
                                    this.scene.state.test = "test2"
                                    this.changeScene("scene2")
                                }
                            }
                        }),
                        image3: Spiel.ex(class extends Spiel.Entity.Image{
                            init(){
                                this.use = "image2"
                                this.x = 350
                                this.y = 300
                            }
                            redraw(){
                                // console.log(this)
                            }
                        }),
                    }
                },
                {backgroundColor: "#0ff",
                    name: "scene2",
                    entity: {
                        image1: Spiel.ex(class extends Spiel.Entity.Image{
                            init(){
                                this.x = 400
                                this.y = 400
                            }
                            redraw(){
                                if(this.key.findIndex((v) =>v === "z") !== -1){
                                    this.changeScene("scene1")
                                }
                            }
                        })
                    }
                },
            ]
        })
    </script>
</body>
</html>
